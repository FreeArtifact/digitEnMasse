datatypes xsd = "http://www.w3.org/2001/XMLSchema-datatypes"

start = page
page = element page {(layer | content)*}
layer = element layer {marks, anyElement*}
anyElement = element * {(attribute * {text})* | text* | mixed{anyElement*}}
# There is no consistent post-layer rule I can define with anyElement, but I'll keep it here as experiment
marks = attribute marks {"typed" | "signature" | "stamp"}
head = element head {title?, author*}
title = element title {mixed{u*}}
author = element author {text}

datePattern = (xsd:date | xsd:gYearMonth | xsd:gYear)

content = element content {layer+}
poem = element poem {stanza+}
stanza = element stanza {stanzaCount, (layer | ln)*}
stanzaCount = attribute stanzaCount {xsd:integer}
ln = element ln {syl, mixed{(prd | cma | cln | emd | u | shape | place | sigFig)*}}
syl = attribute syl {xsd:integer}
prd = element prd {empty}
cma = element cma {empty}
cln = element cln {empty}
emd = element emd {empty}
u = element u {text}

shape = element shape {boundry, des, point, mixed{anyElement*}}
boundry = attribute boundry {"yes" | "no"}
des = attribute des {text}
point = attribute point {text}

place = element place {plName, city, state, text}
plName = attribute plName {text}
city = attribute city {text}
state = attribute state {text}

sigFig = element sigFig {name, occupation, text}
name = attribute name {text}
occupation = attribute occupation {text}
closing = element closing {(layer | shape | draftVer | date)*}
draftVer = element draftVer {text}
date = element date {when, text}
when = attribute when {datePattern}